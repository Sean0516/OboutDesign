### 状态模式

当一个对象内在状态改变时，允许其改变行为，这个对象看起来改变了类。 状态模式的核心是封装，状态的改变引起了行为的变更，从外部看起来就好像这个对象对应的类发生了改变。 状态模式提供了一种对物质运动的另外的一个观察视角，通过状态变更来促进行为的变化

![img](D:\study\OboutDesign\doc\state\state.png)

#### State 抽象状态角色

接口或抽象类。 负责对象状态定义，并且封装环境角色以实现状态切换

#### Concrete State 具体状态角色

每一个具体状态必须完成两个职责，本状态行为管理以及趋向状态处理，通俗的讲，就算本状态下要做的事情，以及本状态如何过度到其他状态

#### context 环境角色

定义客户端需要的接口，并负责具体状态的切换



#### 优点

1. 结构清晰

   避免过多的判断语句的使用，避免了程序的复杂性，提高系统的可维护性

2. 遵循设计原则

    体现了开闭原则和单一职责原则，每个状态都是一个子类，要增加状态就增加子类。需要修改状态，就修改一个子类就可以了

3. 封装性非常好

   状态的转换放置到类的内部来实现，外部的调用不用知道类的内部如何实现状态和行为的转换。



#### 缺点

子类太多，容易形成类膨胀



#### 使用场景

1. 行为随状态变化而改变的场景
2. 条件，分支判断语句的替代者

#### 注意

状态模式适合当某个对象在他的状态发生改变时，他的行为也随着发生比较大的变化。也就是说，行为受到状态的约束的情况下，可以使用状态模式，而使用时，对象的状态最好不要超过五个







