## 享元模式（共享对象）

### 享元模式是池技术的重要实现方式，其定义如下：

使用共享对象可以有效地支持大量的细粒度的对象

享元模式的定义为我们提出了两个要求：

1. 细粒度的对象

   对于细粒度的对象， 是指将对象的信息分为两个部分， 内部状态和外部状态

   1. 内部状态 内部状态是对象可以共享出来的信息，存储在享元对象内部并且不会随着环境改变而改变
   2. 外部状态： 外部状态是对象得以依赖的一个标记， 是随环境而改变的，不可以共享的状态

2. 共享对象

![img](D:\study\OboutDesign\doc\flyweight\flyweight.png)

### 享元模式的角色名称

#### FlyWeight  抽象享元角色

简单来说，就是一个产品的抽象类，同时定义出对象的外部状态和内部状态的接口或实现。 抽象享元角色一般为抽象类。 在实际项目中，一般是一个实现类。他描述一类事物的方法。在抽象角色中，一般需要把外部状态和内部状态定义出来，避免子类的随意扩展

#### concrete fly weight 具体享元角色

定义一个产品类，实现具体角色定义的业务，该角色中需要注意的是内部状态处理应该与环境无关。不应该出现在一个操作改变了内部状态，同时修改了外部状态







